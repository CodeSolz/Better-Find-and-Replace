!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,n){var a=n(1);jQuery(document).ready(function(i){i("form").submit(function(e){e.preventDefault(),i(".btn-custom-submit").attr("disabled","disabled");var t=i(this),n=new FormData(t[0]),r=t.find("#cs_field_action").val();void 0!==r&&0!=r.length||(r="rtafar_ajax"),n.append("action",r),n.append("method",t.find("#cs_field_method").val());var o=t.find("#cs_field_swal_title").val();return i('input[name*="dry_run"]:checked').each(function(){o=rtafr.drT}),swal({title:o,text:t.find("#cs_field_swal_des").val(),timer:2e5,imageUrl:t.find("#cs_field_swal_loading_gif").val(),showConfirmButton:!1,html:!0}),i.ajax({url:ajaxurl,type:"POST",data:n,contentType:!1,cache:!1,processData:!1}).done(function(e){i(".btn-custom-submit").removeAttr("disabled"),!0===e.status?(void 0===e.show_custom_content&&swal({title:e.title,text:e.text,type:"success",html:!0,timer:5e3}),void 0!==e.redirect_url&&(window.location.href=e.redirect_url),void 0!==e.show_custom_content&&(swal.close(),a.displayCustomContent(e))):!1===e.status?swal({title:e.title,text:e.text,type:"error",html:!0,timer:5e3}):swal({title:"OOPS!",text:t.find("#cs_field_swal_error").val(),type:"error",html:!0,timer:5e3})}).fail(function(e){console.log("Error: "+e.responseText),swal("Response Error",e.responseText+"("+e.statusText+") ","error")}),!1}),i('input[name*="dry_run"]').change(function(){this.checked?i(".btn-custom-submit").val(rtafr.frDrBnT):i(".btn-custom-submit").val(rtafr.frBnT)}),i("body").on("select2:select",".db-tables",function(e){"All"==e.params.data.text&&(i(".db-tables > option:enabled").prop("selected","selected"),i(".db-tables").trigger("change"))}),i("body").on("select2:select",".in-which-url",function(e){"All"==e.params.data.text&&(i(".in-which-url > option:enabled").prop("selected","selected"),i(".in-which-url").trigger("change"))})})},function(e,t,n){function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=n(2),y=n(4),o={displayCustomContent:function(e){jQuery("#popup1").addClass("show-popup").removeClass("hide-popup"),jQuery("#popup1 > .popup > .content").removeClass("hidden"),jQuery(".popup > .title ").text("Find & Replace Reports"),jQuery(".popup > .sub-title ").text("Total replacement found : "+e.replacementTotal+" on "+e.replacement+" Row's, on "+e.replacementInTable+" Table's");var t='<button class="button-secondary" type="button" title="'+rtafr.pvt+'" disabled>'+rtafr.rBt+"</button>";$isApplyBtnDisabled="disabled",$isSelectDisabled="disabled",$applyText=rtafr.aT,$checkbox=' disabled ="disabled" title="'+rtafr.pvt+'"',void 0!==rtafr.is_pro_activate&&""!=rtafr.is_pro_activate&&($isApplyBtnDisabled="",$isSelectDisabled="",$applyText=rtafr.aTp,$checkbox="");var n='<table id="bfr-results-table" class="widefat">';if(0<e.replacement){n+='<thead class="bfr-res-head"><tr><th width="1%"></th> <th width="8%">Row ID</th><th width="12%" class="col-stripe">Column</th><th width="30%">Old Value</th><th  class="col-stripe">New Value</th><th width="5%"></th></tr></thead>';var r="";void 0!==rtafr.is_pro_activate&&""!=rtafr.is_pro_activate&&b.setItem("bfrp_findReplace_temp",e.dryRunReport,function(e){void 0!==e&&null===e||jQuery(".popup > .sub-title").after(y.error("Error : "+e))});for(var o=0,i=Object.entries(e.dryRunReport);o<i.length;o++){var a=p(i[o],2),c=a[0],u=a[1];r!==c&&(n+='<tbody><tr class="tbl-name"><td colspan="6"> Table : '+c+"</td></tr>"),r=c;for(var f=0,s=Object.entries(u);f<s.length;f++){var l,d=p(s[f],2),v=(d[0],d[1]);void 0!==rtafr.is_pro_activate&&""!=rtafr.is_pro_activate&&(l=' data-rid = "'+v.rid+'" ',t='<button class="button-primary btn-replace replace-'+v.rid+'" type="button" data-tbl="'+c+'" '+l+" >Replace</button>"),n+='<tr class="rowid_'+v.rid+'"><td width="1%"><input type="checkbox" class="replace-item-check" '+$checkbox+'  value="'+v.rid+'" /> </td><td width="8%" align="center">'+v.rid+'</td>  <td width="12%" class="col-stripe">'+v.col+'</td><td width="30%">'+v.dis_find+'</td> <td  class="col-stripe">'+v.dis_replace+'</td><td width="5%">'+t+"</td></tr>"}}}else n+='<tbody><tr><td colspan="5">'+e.nothing_found+"</td></tr>";n+="</tbody></table>";var h='<select class="bfr-pop-bulk-select" '+$isSelectDisabled+'><option value="">'+rtafr.baT+'</option><option value="">'+rtafr.rT+'</option></select><button class="button-primary btn-bulk-replace" '+$isApplyBtnDisabled+' type="button" >'+$applyText+"</button>";jQuery(".content").html(n),jQuery(".after-content").html(h)}};e.exports=o},function(e,t,n){(function(r){e.exports=function o(i,a,c){function u(n,e){if(!a[n]){if(!i[n]){if(0,f)return f(n,!0);var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}var r=a[n]={exports:{}};i[n][0].call(r.exports,function(e){var t=i[n][1][e];return u(t||e)},r,r.exports,o,i,a,c)}return a[n].exports}for(var f=!1,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,s,t){(function(t){"use strict";var e,n,r,o,i,a=t.MutationObserver||t.WebKitMutationObserver,c=a?(e=0,n=new a(f),r=t.document.createTextNode(""),n.observe(r,{characterData:!0}),function(){r.data=e=++e%2}):t.setImmediate||void 0===t.MessageChannel?"document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)}:((o=new t.MessageChannel).port1.onmessage=f,function(){o.port2.postMessage(0)}),u=[];function f(){var e,t;i=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}i=!1}s.exports=function(e){1!==u.push(e)||i||c()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var o=e(1);function u(){}var f={},i=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==u&&v(this,e)}function s(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(t,n,r){o(function(){var e;try{e=n(r)}catch(e){return f.reject(t,e)}e===t?f.reject(t,new TypeError("Cannot resolve promise with itself")):f.resolve(t,e)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function v(t,e){var n=!1;function r(e){n||(n=!0,f.reject(t,e))}function o(e){n||(n=!0,f.resolve(t,e))}var i=h(function(){e(o,r)});"error"===i.status&&r(i.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===i)return this;var n=new this.constructor(u);return this.state!==r?l(n,this.state===a?e:t,this.outcome):this.queue.push(new s(n,e,t)),n},s.prototype.callFulfilled=function(e){f.resolve(this.promise,e)},s.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},s.prototype.callRejected=function(e){f.reject(this.promise,e)},s.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},f.resolve=function(e,t){var n=h(d,t);if("error"===n.status)return f.reject(e,n.value);var r=n.value;if(r)v(e,r);else{e.state=a,e.outcome=t;for(var o=-1,i=e.queue.length;++o<i;)e.queue[o].callFulfilled(t)}return e},f.reject=function(e,t){e.state=i,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){if(e instanceof this)return e;return f.resolve(new this(u),e)},c.reject=function(e){var t=new this(u);return f.reject(t,e)},c.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);var i=new Array(r),a=0,t=-1,c=new this(u);for(;++t<r;)!function(e,t){n.resolve(e).then(function(e){i[t]=e,++a!==r||o||(o=!0,f.resolve(c,i))},function(e){o||(o=!0,f.reject(c,e))})}(e[t],t);return c},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var o=-1,i=new this(u);for(;++o<n;)!function(e){t.resolve(e).then(function(e){r||(r=!0,f.resolve(i,e))},function(e){r||(r=!0,f.reject(i,e))})}(e[o]);return i}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var c=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function a(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<t.length;o+=1)r.append(t[o]);return r.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function v(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function i(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",o=void 0,h={},f=Object.prototype.toString,p="readonly",b="readwrite";function y(e){return"boolean"==typeof o?s.resolve(o):(r=e,new s(function(n){var e=r.transaction(u,b),t=a([""]);e.objectStore(u).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1}).then(function(e){return o=e}));var r}function m(e){var t=h[e.name],n={};n.promise=new s(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function g(e){var t=h[e.name].deferredOperations.pop();return t&&(t.resolve(),t.promise)}function _(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function w(o,i){return new s(function(e,t){if(h[o.name]=h[o.name]||A(),o.db){if(!i)return e(o.db);m(o),o.db.close()}var n=[o.name];i&&n.push(o.version);var r=c.open.apply(c,n);i&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(o.storeName),t.oldVersion<=1&&e.createObjectStore(u)}catch(e){if("ConstraintError"!==e.name)throw e;console.warn('The database "'+o.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+o.storeName+'" already exists.')}}),r.onerror=function(e){e.preventDefault(),t(r.error)},r.onsuccess=function(){e(r.result),g(o)}})}function I(e){return w(e,!1)}function S(e){return w(e,!0)}function j(e,t){if(!e.db)return 1;var n,r=!e.db.objectStoreNames.contains(e.storeName),o=e.version<e.db.version,i=e.version>e.db.version;return o&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),(i||r)&&(!r||(n=e.db.version+1)>e.version&&(e.version=n),1)}function E(e){return a([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(atob(e.data))],{type:e.type})}function x(e){return e&&e.__local_forage_encoded_blob}function N(e){var t=this,n=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return d(n,e,e),n}function O(t,n,r,o){void 0===o&&(o=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<o&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return s.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),S(t)}).then(function(){return function(n){m(n);for(var r=h[n.name],o=r.forages,e=0;e<o.length;e++){var t=o[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,I(n).then(function(e){return n.db=e,j(n)?S(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<o.length;t++)o[t]._dbInfo.db=e}).catch(function(e){throw _(n,e),e})}(t).then(function(){O(t,n,r,o-1)})}).catch(r);r(e)}}function A(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}var R={_driver:"asyncStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]=e[t];var i=h[o.name];i||(i=A(),h[o.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=N);var n=[];function a(){return s.resolve()}for(var c=0;c<i.forages.length;c++){var u=i.forages[c];u!==r&&n.push(u._initReady().catch(a))}var f=i.forages.slice(0);return s.all(n).then(function(){return o.db=i.db,I(o)}).then(function(e){return o.db=e,j(o,r._defaultConfig.version)?S(o):e}).then(function(e){o.db=i.db=e,r._dbInfo=o;for(var t=0;t<f.length;t++){var n=f[t];n!==r&&(n._dbInfo.db=o.db,n._dbInfo.version=o.version)}})},_support:function(){try{if(!c||!c.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(a,e){var c=this,t=new s(function(i,n){c.ready().then(function(){O(c._dbInfo,p,function(e,t){if(e)return n(e);try{var r=t.objectStore(c._dbInfo.storeName).openCursor(),o=1;r.onsuccess=function(){var e,t,n=r.result;n?(x(e=n.value)&&(e=E(e)),void 0!==(t=a(e,n.key,o++))?i(t):n.continue()):i()},r.onerror=function(){n(r.error)}}catch(e){n(e)}})}).catch(n)});return l(t,e),t},getItem:function(i,e){var a=this;i=v(i);var t=new s(function(r,o){a.ready().then(function(){O(a._dbInfo,p,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).get(i);n.onsuccess=function(){var e=n.result;void 0===e&&(e=null),x(e)&&(e=E(e)),r(e)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return l(t,e),t},setItem:function(c,t,e){var u=this;c=v(c);var n=new s(function(i,a){var e;u.ready().then(function(){return e=u._dbInfo,"[object Blob]"===f.call(t)?y(e.db).then(function(e){return e?t:(r=t,new s(function(n,e){var t=new FileReader;t.onerror=e,t.onloadend=function(e){var t=btoa(e.target.result||"");n({__local_forage_encoded_blob:!0,data:t,type:r.type})},t.readAsBinaryString(r)}));var r}):t}).then(function(o){O(u._dbInfo,b,function(e,t){if(e)return a(e);try{var n=t.objectStore(u._dbInfo.storeName);null===o&&(o=void 0);var r=n.put(o,c);t.oncomplete=function(){void 0===o&&(o=null),i(o)},t.onabort=t.onerror=function(){var e=r.error?r.error:r.transaction.error;a(e)}}catch(e){a(e)}})}).catch(a)});return l(n,e),n},removeItem:function(i,e){var a=this;i=v(i);var t=new s(function(r,o){a.ready().then(function(){O(a._dbInfo,b,function(e,t){if(e)return o(e);try{var n=t.objectStore(a._dbInfo.storeName).delete(i);t.oncomplete=function(){r()},t.onerror=function(){o(n.error)},t.onabort=function(){var e=n.error?n.error:n.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return l(t,e),t},clear:function(e){var i=this,t=new s(function(r,o){i.ready().then(function(){O(i._dbInfo,b,function(e,t){if(e)return o(e);try{var n=t.objectStore(i._dbInfo.storeName).clear();t.oncomplete=function(){r()},t.onabort=t.onerror=function(){var e=n.error?n.error:n.transaction.error;o(e)}}catch(e){o(e)}})}).catch(o)});return l(t,e),t},length:function(e){var i=this,t=new s(function(r,o){i.ready().then(function(){O(i._dbInfo,p,function(e,t){if(e)return o(e);try{var n=t.objectStore(i._dbInfo.storeName).count();n.onsuccess=function(){r(n.result)},n.onerror=function(){o(n.error)}}catch(e){o(e)}})}).catch(o)});return l(t,e),t},key:function(c,e){var u=this,t=new s(function(i,a){c<0?i(null):u.ready().then(function(){O(u._dbInfo,p,function(e,t){if(e)return a(e);try{var n=t.objectStore(u._dbInfo.storeName),r=!1,o=n.openKeyCursor();o.onsuccess=function(){var e=o.result;e?0===c||r?i(e.key):(r=!0,e.advance(c)):i(null)},o.onerror=function(){a(o.error)}}catch(e){a(e)}})}).catch(a)});return l(t,e),t},keys:function(e){var a=this,t=new s(function(o,i){a.ready().then(function(){O(a._dbInfo,p,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName).openKeyCursor(),r=[];n.onsuccess=function(){var e=n.result;e?(r.push(e.key),e.continue()):o(r)},n.onerror=function(){i(n.error)}}catch(e){i(e)}})}).catch(i)});return l(t,e),t},dropInstance:function(a,e){e=i.apply(this,arguments);var t,n,r=this.config();return(a="function"!=typeof a&&a||{}).name||(a.name=a.name||r.name,a.storeName=a.storeName||r.storeName),l(n=a.name?(t=a.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):I(a).then(function(e){var t=h[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e}),a.storeName?t.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var o=e.version+1;m(a);var r=h[a.name],i=r.forages;e.close();for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=null,n._dbInfo.version=o}return new s(function(t,n){var r=c.open(a.name,o);r.onerror=function(e){r.result.close(),n(e)},r.onupgradeneeded=function(){r.result.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,g(n._dbInfo)}}).catch(function(e){throw(_(a,e)||s.resolve()).catch(function(){}),e})}}):t.then(function(e){m(a);var n=h[a.name],r=n.forages;e.close();for(var t=0;t<r.length;t++){r[t]._dbInfo.db=null}return new s(function(t,n){var r=c.deleteDatabase(a.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++){g(r[t]._dbInfo)}}).catch(function(e){throw(_(a,e)||s.resolve()).catch(function(){}),e})})):s.reject("Invalid arguments"),e),n}};var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=/^~~local_forage_type~([^~]+)~/,B="__lfsc__:",k=B.length,C="arbf",M="blob",F=k+C.length,L=Object.prototype.toString;function P(e){var t,n,r,o,i=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);for(var u=new ArrayBuffer(i),f=new Uint8Array(u),s=0;s<a;s+=4)t=D.indexOf(e[s]),n=D.indexOf(e[s+1]),r=D.indexOf(e[s+2]),o=D.indexOf(e[s+3]),f[c++]=t<<2|n>>4,f[c++]=(15&n)<<4|r>>2,f[c++]=(3&r)<<6|63&o;return u}function z(e){for(var t=new Uint8Array(e),n="",r=0;r<t.length;r+=3)n+=D[t[r]>>2],n+=D[(3&t[r])<<4|t[r+1]>>4],n+=D[(15&t[r+1])<<2|t[r+2]>>6],n+=D[63&t[r+2]];return t.length%3==2?n=n.substring(0,n.length-1)+"=":t.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}var U={serialize:function(t,n){var e="";if(t&&(e=L.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===L.call(t.buffer))){var r,o=B;t instanceof ArrayBuffer?(r=t,o+=C):(r=t.buffer,"[object Int8Array]"===e?o+="si08":"[object Uint8Array]"===e?o+="ui08":"[object Uint8ClampedArray]"===e?o+="uic8":"[object Int16Array]"===e?o+="si16":"[object Uint16Array]"===e?o+="ur16":"[object Int32Array]"===e?o+="si32":"[object Uint32Array]"===e?o+="ui32":"[object Float32Array]"===e?o+="fl32":"[object Float64Array]"===e?o+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(o+z(r))}else if("[object Blob]"===e){var i=new FileReader;i.onload=function(){var e="~~local_forage_type~"+t.type+"~"+z(this.result);n(B+M+e)},i.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){console.error("Couldn't convert value into a JSON string: ",t),n(null,e)}},deserialize:function(e){if(e.substring(0,k)!==B)return JSON.parse(e);var t,n,r=e.substring(F),o=e.substring(k,F);o===M&&T.test(r)&&(n=(t=r.match(T))[1],r=r.substring(t[0].length));var i=P(r);switch(o){case C:return i;case M:return a([i],{type:n});case"si08":return new Int8Array(i);case"ui08":return new Uint8Array(i);case"uic8":return new Uint8ClampedArray(i);case"si16":return new Int16Array(i);case"ur16":return new Uint16Array(i);case"si32":return new Int32Array(i);case"ui32":return new Uint32Array(i);case"fl32":return new Float32Array(i);case"fl64":return new Float64Array(i);default:throw new Error("Unkown type: "+o)}},stringToBuffer:P,bufferToString:z};function q(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function Q(e,r,o,i,a,c){e.executeSql(o,i,a,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,t){t.rows.length?c(e,n):q(e,r,function(){e.executeSql(o,i,a,c)},c)},c):c(e,n)},c)}function W(a,e,c,u){var f=this;a=v(a);var t=new s(function(o,i){f.ready().then(function(){void 0===e&&(e=null);var n=e,r=f._dbInfo;r.serializer.serialize(e,function(t,e){e?i(e):r.db.transaction(function(e){Q(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[a,t],function(){o(n)},function(e,t){i(t)})},function(e){if(e.code===e.QUOTA_ERR){if(0<u)return void o(W.apply(f,[a,n,c,u-1]));i(e)}})})}).catch(i)});return l(t,c),t}var $={_driver:"webSQLStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new s(function(t,n){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(e){return n(e)}o.db.transaction(function(e){q(e,o,function(){r._dbInfo=o,t()},function(e,t){n(t)})},n)});return o.serializer=U,n},_support:"function"==typeof openDatabase,iterate:function(f,e){var t=this,n=new s(function(u,n){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(e){Q(e,c,"SELECT * FROM "+c.storeName,[],function(e,t){for(var n=t.rows,r=n.length,o=0;o<r;o++){var i=n.item(o),a=(a=i.value)&&c.serializer.deserialize(a);if(void 0!==(a=f(a,i.key,o+1)))return void u(a)}u()},function(e,t){n(t)})})}).catch(n)});return l(n,e),n},getItem:function(t,e){var i=this;t=v(t);var n=new s(function(o,n){i.ready().then(function(){var r=i._dbInfo;r.db.transaction(function(e){Q(e,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){var n=(n=t.rows.length?t.rows.item(0).value:null)&&r.serializer.deserialize(n);o(n)},function(e,t){n(t)})})}).catch(n)});return l(n,e),n},setItem:function(e,t,n){return W.apply(this,[e,t,n,1])},removeItem:function(o,e){var i=this;o=v(o);var t=new s(function(n,r){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){Q(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[o],function(){n()},function(e,t){r(t)})})}).catch(r)});return l(t,e),t},clear:function(e){var o=this,t=new s(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){Q(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return l(t,e),t},length:function(e){var o=this,t=new s(function(r,n){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){Q(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){var n=t.rows.item(0).c;r(n)},function(e,t){n(t)})})}).catch(n)});return l(t,e),t},key:function(o,e){var i=this,t=new s(function(r,n){i.ready().then(function(){var t=i._dbInfo;t.db.transaction(function(e){Q(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[o+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;r(n)},function(e,t){n(t)})})}).catch(n)});return l(t,e),t},keys:function(e){var r=this,t=new s(function(o,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){Q(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);o(n)},function(e,t){n(t)})})}).catch(n)});return l(t,e),t},dropInstance:function(n,e){e=i.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var o=this,t=n.name?new s(function(e){var i,t=n.name===r.name?o._dbInfo.db:openDatabase(n.name,"","",0);n.storeName?e({db:t,storeNames:[n.storeName]}):e((i=t,new s(function(o,n){i.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);o({db:i,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})))}).then(function(a){return new s(function(o,i){a.db.transaction(function(r){for(var e=[],t=0,n=a.storeNames.length;t<n;t++)e.push(function(t){return new s(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}(a.storeNames[t]));s.all(e).then(function(){o()}).catch(function(e){i(e)})},function(e){i(e)})})}):s.reject("Invalid arguments");return l(t,e),t}};function K(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function H(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),void localStorage.removeItem(e)}catch(e){return 1}}()||0<localStorage.length}function V(e,t){for(var n,r,o=e.length,i=0;i<o;){if((n=e[i])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return 1;i++}}var X={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=K(e,this._defaultConfig),H()?((this._dbInfo=t).serializer=U,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(u,e){var f=this,t=f.ready().then(function(){for(var e=f._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,o=1,i=0;i<r;i++){var a=localStorage.key(i);if(0===a.indexOf(t)){var c=(c=localStorage.getItem(a))&&e.serializer.deserialize(c);if(void 0!==(c=u(c,a.substring(n),o++)))return c}}});return l(t,e),t},getItem:function(n,e){var r=this;n=v(n);var t=r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t=t&&e.serializer.deserialize(t)});return l(t,e),t},setItem:function(a,e,t){var c=this;a=v(a);var n=c.ready().then(function(){void 0===e&&(e=null);var i=e;return new s(function(n,r){var o=c._dbInfo;o.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(o.keyPrefix+a,e),n(i)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})});return l(n,t),n},removeItem:function(t,e){var n=this;t=v(t);var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return l(r,e),r},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return l(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return l(t,e),t},key:function(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t=t&&t.substring(e.keyPrefix.length)});return l(t,e),t},keys:function(e){var i=this,t=i.ready().then(function(){for(var e=i._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n});return l(t,e),t},dropInstance:function(t,e){var n;e=i.apply(this,arguments),(t="function"!=typeof t&&t||{}).name||(n=this.config(),t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r=this,o=t.name?new s(function(e){t.storeName?e(K(t,r._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):s.reject("Invalid arguments");return l(o,e),o}},G=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},J={},Y={},Z={INDEXEDDB:R,WEBSQL:$,LOCALSTORAGE:X},ee=[Z.INDEXEDDB._driver,Z.WEBSQL._driver,Z.LOCALSTORAGE._driver],te=["dropInstance"],ne=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(te),re={description:"",driver:ee.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)n.hasOwnProperty(r)&&(G(n[r])?e[r]=n[r].slice():e[r]=n[r])}return e}function ie(e){for(var t in!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ie),Z){var n,r;Z.hasOwnProperty(t)&&(r=(n=Z[t])._driver,this[t]=r,J[r]||this.defineDriver(n))}this._defaultConfig=oe({},re),this._config=oe({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}var ae=new(ie.prototype.config=function(e){if("object"!==(void 0===e?"undefined":r(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},ie.prototype.defineDriver=function(f,e,t){var n=new s(function(t,n){try{var r=f._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!f._driver)return void n(e);for(var o=ne.concat("_initStorage"),i=0,a=o.length;i<a;i++){var c=o[i];if((!V(te,c)||f[c])&&"function"!=typeof f[c])return void n(e)}!function(){for(var e=0,t=te.length;e<t;e++){var n=te[e];f[n]||(f[n]=function(n){return function(){var e=new Error("Method "+n+" is not implemented by the current driver"),t=s.reject(e);return l(t,arguments[arguments.length-1]),t}}(n))}}();var u=function(e){J[r]&&console.info("Redefining LocalForage driver: "+r),J[r]=f,Y[r]=e,t()};"_support"in f?f._support&&"function"==typeof f._support?f._support().then(u,n):u(!!f._support):u(!0)}catch(e){n(e)}});return d(n,e,t),n},ie.prototype.driver=function(){return this._driver||null},ie.prototype.getDriver=function(e,t,n){var r=J[e]?s.resolve(J[e]):s.reject(new Error("Driver not found."));return d(r,t,n),r},ie.prototype.getSerializer=function(e){var t=s.resolve(U);return d(t,e),t},ie.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return d(n,e,e),n},ie.prototype.setDriver=function(e,t,n){var i=this;G(e)||(e=[e]);var r=this._getSupportedDrivers(e);function a(){i._config.driver=i.driver()}function c(e){return i._extend(e),a(),i._ready=i._initStorage(i._config),i._ready}function o(o){return function(){var r=0;return function e(){for(;r<o.length;){var t=o[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(t).then(c).catch(e)}a();var n=new Error("No available storage method found.");return i._driverSet=s.reject(n),i._driverSet}()}}var u=null!==this._driverSet?this._driverSet.catch(function(){return s.resolve()}):s.resolve();return this._driverSet=u.then(function(){var e=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,a(),i._wrapLibraryMethodsWithReady(),i._initDriver=o(r)})}).catch(function(){a();var e=new Error("No available storage method found.");return i._driverSet=s.reject(e),i._driverSet}),d(this._driverSet,t,n),this._driverSet},ie.prototype.supports=function(e){return!!Y[e]},ie.prototype._extend=function(e){oe(this,e)},ie.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},ie.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ne.length;e<t;e++)!function(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}(this,ne[e])},ie.prototype.createInstance=function(e){return new ie(e)},ie);t.exports=ae},{3:3}]},{},[4])(4)}).call(this,n(3))},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n={warning:function(e){return n.removeMsg("notice"),'<div class="notice notice-warning">'+e+"</div>"},error:function(e){return n.removeMsg("notice"),'<div class="notice notice-error">'+e+"</div>"},info:function(e){return n.removeMsg("notice"),'<div class="notice notice-info">'+e+"</div>"},success:function(e){return n.removeMsg("notice"),'<div class="notice notice-success">'+e+"</div>"},removeMsg:function(e){jQuery("."+e).hide("slow").remove()}};e.exports=n}]);